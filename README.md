# Geospatial Analysis of Transmission Infrastructure Risk under Land Deformation and Environmental Change ‚ö°Ô∏è

<hr style="border: 3px solid #000;">

<p align="center">
  <strong>Zih-Syun Chen<sup>1</sup>, Peng Zhang<sup>1</sup>, Pietro Milillo<sup>2</sup></strong>
</p>

<p align="center">
  <sup>1</sup> Department of Civil and Environmental Engineering, University of Houston, Houston, TX, USA<br>
  <sup>2</sup> Department of Civil and Environmental Engineering, University of Houston, Houston, TX, USA
</p>

<hr style="border: 1px solid #ccc;">

## üéØ Big Picture: Why This Project Matters

The **Gulf Coast** is a critical hub for the United States' energy sector, facing increasing threats from climate change (e.g., severe storms, sea-level rise) and active geological processes (e.g., land subsidence). Maintaining the stability and resilience of its vast transmission line infrastructure is **important** for national energy security and the region's economy.

This project utilizes InSAR (Interferometric Synthetic Aperture Radar) data from the NASA/JPL **OPERA** mission to systematically assess and classify the deformation risk of transmission towers across the Gulf Coast.

**The ultimate goal is to produce actionable recommendations for transmission line planning, siting, and maintenance to support the Gulf Coast's growing energy needs and enhance the resilience of the energy grid against environmental hazards.**

---

## ‚öôÔ∏è Project Workflow Overview

## ‚≠ïÔ∏è As part of the dataset already been uploaded, you can just start from Risk Classification (deform_risk_classi(whole).py) after setting up the environment.yml.

The analysis is structured into a three-step pipeline:

| Step | Script | Function | Key Output |
| :--- | :--- | :--- | :--- |
| **1. Data Acquisition** | `download_opera_disp_data.py` | Connects to ASF DAAC, searches for OPERA InSAR displacement files for specified counties, and downloads the raw H5 files. | Raw OPERA H5 files |
| **2. Data Pre-Processing** | `Opera-Vertical-Mask-Reproject-Processcer.py` | Converts LOS displacement to **vertical displacement** using incidence angles, applies masking, and reprojects data into dual-band GeoTIFFs (Vertical Displacement + Coherence). | GeoTIFFs |
| **3. Risk Classification** | `deform_risk_classi(whole).py` | Analyzes tower velocity and strain, integrates environmental factors (e.g., storm surge), classifies risk levels, runs PCA, and generates final maps/reports. | Risk Maps, Excel Report, Histograms |

---

## üöÄ Getting Started

### 1. Environment Setup

The required packages for this project can be installed using the provided `environment.yml` file.

#### In terminal:

```bash
# 1. Create the conda environment
conda env create -f environment.yml

# 2. Activate the new environment
conda activate transmission
```


### 2. Execution Steps üíª
The analysis must be run sequentially. Below are the commands for execution in your terminal or command prompt, using placeholders (<...>) where you must provide your specific file paths.

#### Step 1: Download OPERA Displacement Data
(Script: download_opera_disp_data.py)

Requires Earthdata Login credentials (prompted during runtime) to download H5 files from ASF DAAC.

```Bash
python download_opera_disp_data.py
```

#### Step 2: Data Pre-Processing & Vertical Conversion
(Script: Opera-Vertical-Mask-Reproject-Processcer.py)

Processes raw H5 files to convert Line-of-Sight (LOS) displacement to Vertical Displacement and saves them as dual-band GeoTIFFs.

```Bash
python "Opera-Vertical-Mask-Reproject-Processcer.py" <input_dir> <output_dir> <shapefile_path> 1
Note: The trailing 1 means the script applies the recommended mask for quality control.
```

#### Step 3: Deformation Classification & Risk Analysis
(Script: deform_risk_classi(whole).py)

This script performs the core spatio-temporal analysis and requires path modifications within the script itself before execution.

Action Required: Open deform_risk_classi(whole).py and update the file paths inside the if __name__ == "__main__": block to match your local setup:

```Python

if __name__ == "__main__":
    base_path = '...' # Adjust path (used as base for environmental data)
    
    env_rasters = {
        # Adjust paths to your environmental data
        'sea_level_rise_1_5ft': '...', 
        'storm_surge_cat1': '...',
        # ... and so on
    }
    
    analyzer = TowerAnalysis(
        # IMPORTANT: This should point to the directory containing the CSV files 
        # generated by the previous time-series extraction step (not shown in the workflow but assumed to precede this step).
        csv_folder_path="/data-new/zchen66/vertical_disp_nomask", 
        shapefile_path="...", # Path to tower shapefile
        study_area_path="...", # Path to county shapefile folder
        output_folder="...", # Path for output maps/reports
        env_rasters=env_rasters
    )
    
    towers_analysis, strain_df = analyzer.run_analysis()
    
    if towers_analysis is not None:
        analyzer.export_results(towers_analysis, strain_df)
```
Once the paths are updated, run the script from your terminal:

```Bash
python deform_risk_classi(whole).py
```
